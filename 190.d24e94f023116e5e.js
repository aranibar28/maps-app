"use strict";(self.webpackChunkmaps_app=self.webpackChunkmaps_app||[]).push([[190],{190:(b,m,c)=>{c.r(m),c.d(m,{MapsModule:()=>y});var p=c(808),u=c(140),s=c(898),e=c(223);let d=(()=>{class o{constructor(){}ngOnInit(){new s.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[-77.05382221409327,-11.99187478590581],zoom:17})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-full-screen"]],decls:1,vars:0,consts:[["id","map",1,"map-container"]],template:function(t,n){1&t&&e._UZ(0,"div",0)},encapsulation:2}),o})();const g=["map"],f=function(o){return{"background-color":o}};function M(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"li",5),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.oxw().goMarker(i.marker)})("dblclick",function(){const i=e.CHM(t).index;return e.oxw().deleteMarker(i)}),e._uU(1),e.qZA()}if(2&o){const n=r.index;e.Q6J("ngStyle",e.VKq(2,f,r.$implicit.color)),e.xp6(1),e.hij(" Marcador ",n+1," ")}}let _=(()=>{class o{constructor(){this.zoomLevel=15,this.center=[-77.05382221409327,-11.99187478590581],this.markers=[]}ngAfterViewInit(){this.map=new s.Map({container:this.divMap.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:this.center,zoom:this.zoomLevel}),this.readLocalStorage()}addMarker(){const t="#xxxxxx".replace(/x/g,a=>(16*Math.random()|0).toString(16)),n=new s.Marker({draggable:!0,color:t}).setLngLat(this.center).addTo(this.map);this.markers.push({color:t,marker:n}),this.saveMarkerLocalStorage(),n.on("dragend",()=>{this.saveMarkerLocalStorage()})}goMarker(t){this.map.flyTo({center:t.getLngLat()})}saveMarkerLocalStorage(){const t=[];this.markers.forEach(n=>{const a=n.color,{lng:i,lat:l}=n.marker.getLngLat();t.push({color:a,center:[i,l]})}),localStorage.setItem("markers",JSON.stringify(t))}readLocalStorage(){localStorage.getItem("markers")&&JSON.parse(localStorage.getItem("markers")).forEach(n=>{const a=new s.Marker({color:n.color,draggable:!0}).setLngLat(n.center).addTo(this.map);this.markers.push({marker:a,color:n.color}),a.on("dragend",()=>{this.saveMarkerLocalStorage()})})}deleteMarker(t){var n;null===(n=this.markers[t].marker)||void 0===n||n.remove(),this.markers.splice(t,1),this.saveMarkerLocalStorage()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-markers"]],viewQuery:function(t,n){if(1&t&&e.Gf(g,5),2&t){let a;e.iGM(a=e.CRH())&&(n.divMap=a.first)}},decls:6,vars:1,consts:[[1,"map-container"],["map",""],[1,"list-group"],["title","1 Click = Agregar | 2 Click Marcador (x) = Eliminar",1,"list-group-item","list-group-item-info","no-selectable",3,"click"],["class","list-group-item text-white no-selectable",3,"ngStyle","click","dblclick",4,"ngFor","ngForOf"],[1,"list-group-item","text-white","no-selectable",3,"ngStyle","click","dblclick"]],template:function(t,n){1&t&&(e._UZ(0,"div",0,1),e.TgZ(2,"ul",2)(3,"li",3),e.NdJ("click",function(){return n.addMarker()}),e._uU(4," + Agregar "),e.qZA(),e.YNc(5,M,2,4,"li",4),e.qZA()),2&t&&(e.xp6(5),e.Q6J("ngForOf",n.markers))},directives:[p.sg,p.PC],styles:[".list-group[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:99;cursor:pointer}"]}),o})();const h=["map"];let v=(()=>{class o{constructor(){this.lngLat=[0,0]}ngAfterViewInit(){var t=new s.Map({container:this.divMap.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:this.lngLat,zoom:15,interactive:!1});(new s.Marker).setLngLat(this.lngLat).addTo(t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-mini-map"]],viewQuery:function(t,n){if(1&t&&e.Gf(h,5),2&t){let a;e.iGM(a=e.CRH())&&(n.divMap=a.first)}},inputs:{lngLat:"lngLat"},decls:2,vars:0,consts:[[1,"minimap-container"],["map",""]],template:function(t,n){1&t&&e._UZ(0,"div",0,1)},encapsulation:2}),o})();function k(o,r){if(1&o&&(e.TgZ(0,"div",6)(1,"div",7),e._UZ(2,"app-mini-map",8),e.TgZ(3,"div",9)(4,"h5",10),e._uU(5),e.qZA(),e.TgZ(6,"p",11),e._uU(7),e.qZA()()()()),2&o){const t=r.$implicit;e.xp6(2),e.Q6J("lngLat",t.lngLat),e.xp6(3),e.Oqu(t.titulo),e.xp6(2),e.Oqu(t.descripcion)}}let C=(()=>{class o{constructor(){this.propiedades=[{titulo:"Casa residencial, Canad\xe1",descripcion:"Bella propiedad en Katana, Canad\xe1",lngLat:[-75.92722289474008,45.280015511264466]},{titulo:"Casa de playa, M\xe9xico",descripcion:"Hermosa casa de playa en Acapulco, M\xe9xico",lngLat:[-99.91287720907991,16.828940930185748]},{titulo:"Apartamento, Argentina",descripcion:"Lujoso apartamento en el coraz\xf3n de Buenos Aires, Argentina",lngLat:[-58.430166677283445,-34.57150108832866]},{titulo:"Local comercial, Espa\xf1a",descripcion:"Local comercial disponible en Madrid, Espa\xf1a, cerca de El Jard\xedn Secreto.",lngLat:[-3.7112735618380177,40.42567285425766]}]}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-properties"]],decls:11,vars:1,consts:[[1,"row","mt-3"],[1,"col-2"],[1,"col"],[1,"row","container"],[1,"row"],["class","col-4 mb-2",4,"ngFor","ngForOf"],[1,"col-4","mb-2"],[1,"card"],[1,"card-img-top",3,"lngLat"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"h1"),e._uU(4,"Lista de propiedades"),e.qZA(),e._UZ(5,"hr"),e.qZA()(),e.TgZ(6,"div",3),e._UZ(7,"div",1),e.TgZ(8,"div",2)(9,"div",4),e.YNc(10,k,8,3,"div",5),e.qZA()()()),2&t&&(e.xp6(10),e.Q6J("ngForOf",n.propiedades))},directives:[p.sg,v],encapsulation:2}),o})();const x=["map"],L=[{path:"",children:[{path:"fullscreen",component:d},{path:"zoom-range",component:(()=>{class o{constructor(){this.zoomLevel=10,this.center=[-77.05382221409327,-11.99187478590581]}ngOnDestroy(){this.map.off("zoom",()=>{}),this.map.off("zoomend",()=>{}),this.map.off("move",()=>{})}ngAfterViewInit(){this.map=new s.Map({container:this.divMap.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:this.center,zoom:this.zoomLevel}),this.map.on("zoom",()=>{this.zoomLevel=this.map.getZoom()}),this.map.on("zoomend",()=>{this.map.getZoom()>18&&this.map.zoomTo(18)}),this.map.on("move",t=>{const n=t.target,{lng:a,lat:i}=n.getCenter();this.center=[a,i]})}zoomOut(){this.map.zoomOut()}zoomIn(){this.map.zoomIn()}zoomChange(t){this.map.zoomTo(Number(t))}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-zoom-range"]],viewQuery:function(t,n){if(1&t&&e.Gf(x,5),2&t){let a;e.iGM(a=e.CRH())&&(n.divMap=a.first)}},decls:16,vars:13,consts:[[1,"map-container"],["map",""],[1,"row"],[1,"col-12"],[1,"form-label"],["type","range","min","0","max","18",1,"form-range",3,"value","input"],["zoomInput",""],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"btn","btn-primary","btn-sm","float-end",3,"click"]],template:function(t,n){if(1&t){const a=e.EpF();e._UZ(0,"div",0,1),e.TgZ(2,"div",2)(3,"div",3)(4,"small",4),e._uU(5),e.ALo(6,"number"),e.ALo(7,"number"),e.ALo(8,"number"),e.qZA(),e.TgZ(9,"input",5,6),e.NdJ("input",function(){e.CHM(a);const l=e.MAs(10);return n.zoomChange(l.value)}),e.qZA()(),e.TgZ(11,"div",3)(12,"button",7),e.NdJ("click",function(){return n.zoomOut()}),e._uU(13,"-"),e.qZA(),e.TgZ(14,"button",8),e.NdJ("click",function(){return n.zoomIn()}),e._uU(15," + "),e.qZA()()()}2&t&&(e.xp6(5),e.lnq(" Zoom: ",e.xi3(6,4,n.zoomLevel,"2.0-2")," - Lng, Lat: ",e.xi3(7,7,n.center[0],"2.4-4"),", ",e.xi3(8,10,n.center[1],"2.4-4")," "),e.xp6(4),e.Q6J("value",n.zoomLevel))},pipes:[p.JJ],styles:[".row[_ngcontent-%COMP%]{background-color:#fff;z-index:999;position:fixed;left:50px;bottom:50px;padding:10px;border-radius:5px;width:400px}"]}),o})()},{path:"markers",component:_},{path:"properties",component:C},{path:"**",redirectTo:"fullscreen"}]}];let Z=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.Bz.forChild(L)],u.Bz]}),o})(),y=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,Z]]}),o})()}}]);